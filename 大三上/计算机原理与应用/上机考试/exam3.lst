Microsoft (R) Macro Assembler Version 6.11		    10/28/25 23:58:17
tempfile.asm						     Page 1 - 1


 0000				DATAS SEGMENT
 0000 FF			    input_max db 255       ; 输入缓冲区：最大可输入字符数（255个，满足长字符串需求）
 0001 00			    input_real db ?        ; 实际输入字符数（由DOS 0AH功能调用自动填充，记录有效字符长度）
 0002  00FF [			    input db 255 dup(?)    ; 存储用户输入的原始字符串（以ASCII码形式保存）
        00
       ]
 0101  01FF [			    output db 511 dup(?)   ; 存储删除字母后的结果字符串（预留足够空间，与输入长度匹配）
        00
       ]
 0300				DATAS ENDS

 0000				STACKS SEGMENT
				    ; 堆栈段（未定义具体栈空间，使用系统默认堆栈存储子程序调用上下文）
 0000				STACKS ENDS

 0000				CODES SEGMENT
				    ASSUME CS:CODES,DS:DATAS,SS:STACKS  ; 关联段寄存器：CS指向代码段，DS指向数据段，SS指向堆栈段
 0000				START:
 0000  B8 ---- R		    MOV AX,DATAS           ; 将数据段基地址送入AX（DS不能直接赋值，需通过AX中转）
 0003  8E D8			    MOV DS,AX              ; 初始化数据段寄存器DS，确保后续能正确访问数据段内容
 0005  8D 16 0000 R		    lea dx, input_max      ; 取输入缓冲区首地址（input_max）送入dx，为DOS输入功能做准备
 0009  B4 0A			    mov ah, 0ah            ; 设置DOS功能调用号为0AH（带缓冲区的键盘输入功能）
 000B  CD 21			    int 21h                ; 执行DOS中断：用户输入的字符串存入input，实际长度存入input_real
 000D  E8 003C			    call crlf              ; 调用换行子程序，分隔输入操作与输出结果，优化屏幕显示

				    ; 初始化指针与计数器，准备逐字符处理字符串
 0010  8D 36 0002 R		    lea si, input          ; 源变址寄存器SI指向输入字符串（input）起始位置，用于读取原始字符
 0014  8D 3E 0101 R		    lea di, output         ; 目标变址寄存器DI指向输出字符串（output）起始位置，用于存储结果字符
 0018  8A 0E 0001 R		    mov cl, input_real     ; 循环计数器CX的低8位（CL）设为实际输入字符数，控制处理次数
 001C  B5 00			    mov ch, 0              ; CX的高8位（CH）清零，确保CX整体为无符号的实际字符数

 001E				L:                        ; 循环入口：逐字符判断是否为英文字母，决定保留或删除
 001E  8A 1C			    mov bl, [si]           ; 将SI指向的当前原始字符送入BL（临时存储，避免直接修改内存）
				    
				    ; 多条件判断：筛选出英文字母（大写A-Z：41H-5AH；小写a-z：61H-7AH）
 0020  80 FB 41			    cmp bl, 41h            ; 比较当前字符与大写字母'A'（ASCII码41H）
 0023  7C 0F			    jl copy                ; 若字符ASCII码＜41H（不是字母），跳至copy保留该字符
 0025  80 FB 5A			    cmp bl, 5ah            ; 比较当前字符与大写字母'Z'（ASCII码5AH）
 0028  7E 0D			    jle delete             ; 若字符ASCII码≤5AH（是大写字母），跳至delete删除该字符
 002A  80 FB 61			    cmp bl, 61h            ; 比较当前字符与小写字母'a'（ASCII码61H）
 002D  7C 05			    jl copy                ; 若字符ASCII码在5AH-61H之间（不是字母），跳至copy保留该字符
 002F  80 FB 7A			    cmp bl, 7ah            ; 比较当前字符与小写字母'z'（ASCII码7AH）
 0032  7E 03			    jle delete             ; 若字符ASCII码≤7AH（是小写字母），跳至delete删除该字符

 0034				copy:                     ; 非字母字符处理：保留字符到输出缓冲区
 0034  88 1D			    mov [di], bl           ; 将当前非字母字符复制到DI指向的输出缓冲区
 0036  47			    inc di                 ; 目标指针DI后移1位，为存储下一个保留字符预留位置
 0037				delete:                   ; 字母字符处理：不保留，直接跳过
 0037  46			    inc si                 ; 源指针SI后移1位，指向输入字符串的下一个字符
 0038  E2 E4			    loop L                 ; CX计数器减1，若CX≠0则继续循环，直至所有字符处理完成

				    ; 输出删除字母后的结果字符串
 003A  8D 16 0101 R		    lea dx, output         ; 将输出字符串起始地址送入dx，为DOS显示功能做准备
 003E  C6 05 24			    mov byte ptr [di], '$' ; 在输出字符串末尾添加'$'（DOS 09H功能的字符串结束标志，必须添加）
 0041  B4 09			    mov ah, 09h            ; 设置DOS功能调用号为09H（显示以'$'结尾的字符串功能）
 0043  CD 21			    int 21h                ; 执行DOS中断，在屏幕上显示删除字母后的结果
 0045  E8 0004			    call crlf              ; 调用换行子程序，使后续内容（若有）换行显示，保持格式整洁

				    ; 程序正常结束，返回DOS系统
 0048  B4 4C			    MOV AH,4CH             ; 设置DOS功能调用号为4CH（程序退出并释放资源功能）
 004A  CD 21			    INT 21H                ; 执行DOS中断，返回DOS环境

				; 子程序：crlf - 实现屏幕换行（输出回车符+换行符，规范显示格式）
 004C				crlf proc near            ; 定义近过程（仅在当前代码段内调用）
 004C  B2 0D			    mov dl, 13             ; 将回车符ASCII码（13）送入DL（DOS字符输出的内容寄存器）
 004E  B4 02			    mov ah, 02h            ; 设置DOS功能调用号为02H（单个字符输出功能）
 0050  CD 21			    int 21h                ; 执行DOS中断，输出回车符（光标回到当前行开头）
 0052  B2 0A			    mov dl, 10             ; 将换行符ASCII码（10）送入DL
 0054  B4 02			    mov ah, 02h            ; 再次设置单个字符输出功能
 0056  CD 21			    int 21h                ; 执行DOS中断，输出换行符（光标下移一行）
 0058  C3			    ret                    ; 子程序返回，回到调用处继续执行后续代码
 0059				crlf endp                 ; 子程序定义结束
 0059				CODES ENDS
				    END START              ; 汇编程序结束，指定程序入口为START标签
Microsoft (R) Macro Assembler Version 6.11		    10/28/25 23:58:17
tempfile.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

CODES  . . . . . . . . . . . . .	16 Bit	 0059	  Para	  Private 
DATAS  . . . . . . . . . . . . .	16 Bit	 0300	  Para	  Private 
STACKS . . . . . . . . . . . . .	16 Bit	 0000	  Para	  Private 


Procedures,  parameters and locals:

                N a m e                 Type     Value    Attr

crlf . . . . . . . . . . . . . .	P Near	 004C	  CODES	Length= 000D Public


Symbols:

                N a m e                 Type     Value    Attr

L  . . . . . . . . . . . . . . .	L Near	 001E	  CODES	
START  . . . . . . . . . . . . .	L Near	 0000	  CODES	
copy . . . . . . . . . . . . . .	L Near	 0034	  CODES	
delete . . . . . . . . . . . . .	L Near	 0037	  CODES	
input_max  . . . . . . . . . . .	Byte	 0000	  DATAS	
input_real . . . . . . . . . . .	Byte	 0001	  DATAS	
input  . . . . . . . . . . . . .	Byte	 0002	  DATAS	
output . . . . . . . . . . . . .	Byte	 0101	  DATAS	

	   0 Warnings
	   0 Errors
