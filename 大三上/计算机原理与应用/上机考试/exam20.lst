Microsoft (R) Macro Assembler Version 6.11		    11/02/25 17:09:14
tempfile.asm						     Page 1 - 1


 0000				DATAS SEGMENT
				    ; 数组A：包含20个互不相等的字型整数（16位），需从中筛选不在B中的元素
 0000 0001 0002 0021 0004	    A dw 1,2,33,4,5,6,7,8,9,10,11,32,13,14,15,16,17,18,19,31  
       0005 0006 0007
       0008 0009 000A
       000B 0020 000D
       000E 000F 0010
       0011 0012 0013
       001F
				    ; 数组B：包含30个互不相等的字型整数（16位），作为筛选参照（A中不在B里的元素存入C）
 0028 0001 0002 0003 0004	    B dw 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30  
       0005 0006 0007
       0008 0009 000A
       000B 000C 000D
       000E 000F 0010
       0011 0012 0013
       0014 0015 0016
       0017 0018 0019
       001A 001B 001C
       001D 001E
				    ; 数组my_C：预留20个字型空间（与A元素个数一致），用于存储最终筛选结果（A中有、B中无的元素）
 0064  0014 [			    my_C dw 20 dup(?)
        0000
       ]
 008C 0014			    num_A dw 20            ; 数组A的元素个数（20个），控制外层循环次数
 008E 001E			    num_B dw 30            ; 数组B的元素个数（30个），控制内层循环次数
 0090				DATAS ENDS

				; 调试提示：输入d 0可查看段寄存器信息（用户预留调试指令，无需执行）
 0000				STACKS SEGMENT
				    ; 堆栈段：未定义具体栈空间，使用系统默认堆栈（用于临时保存外层循环计数器cx）
 0000				STACKS ENDS

 0000				CODES SEGMENT
				    ; 关联段寄存器：CS指向代码段（存放指令），DS指向数据段（存放数组/变量），SS指向堆栈段
				    ASSUME CS:CODES,DS:DATAS,SS:STACKS
 0000				START:
 0000  B8 ---- R		    MOV AX,DATAS           ; 将数据段基地址送入AX（DS不能直接赋值，需通过AX中转）
 0003  8E D8			    MOV DS,AX              ; 初始化数据段寄存器DS，确保程序能正确访问数据段中的数组/变量
				    
				    ; 初始化寄存器：为双重循环和数组操作做准备
 0005  BE 0000			    mov si, 0              ; si = 0：数组my_C的索引（字型元素占2字节，后续每次+2）
 0008  BB 0000			    mov bx, 0              ; bx = 0：数组A的索引（字型元素占2字节，后续每次+2）
 000B  8B 0E 008C R		    mov cx, num_A          ; cx = num_A（20）：外层循环计数器，控制遍历数组A的次数
 000F				L1:                        ; 外层循环入口：逐个取出数组A的元素，与数组B所有元素对比
 000F  51			    push cx                ; 保存外层循环计数器cx（因内层循环会复用cx，避免值被覆盖）
				    
				    ; 初始化内层循环参数：准备遍历数组B，对比当前A元素
 0010  8B 0E 008E R		    mov cx, num_B          ; cx = num_B（30）：内层循环计数器，控制遍历数组B的次数
 0014  8B 87 0000 R		    mov ax, A[bx]          ; ax = 数组A当前元素（A[bx]）：取A中当前待对比的元素
 0018  BF 0000			    mov di, 0              ; di = 0：数组B的索引（字型元素占2字节，后续每次+2）
 001B				L2:                        ; 内层循环入口：逐个取出数组B的元素，与当前A元素对比
 001B  3B 85 0028 R		    cmp ax, B[di]          ; 比较当前A元素（ax）与当前B元素（B[di]）
 001F  74 05			    je L3                  ; 若两者相等（说明A元素在B中存在），跳至L3（不存入my_C）
 0021  83 C7 02			    add di, 2              ; 若不相等，di+2（移动到数组B的下一个元素，字型占2字节）
 0024  E2 F5			    loop L2                ; 内层循环：cx减1，若cx≠0则继续对比B的下一个元素
 0026				L3:                        ; 对比结果处理：判断A元素是否在B中存在
 0026  83 F9 00			    cmp cx, 0              ; 检查内层循环计数器cx：cx=0表示B遍历完未找到匹配，cx≠0表示找到匹配
 0029  75 07			    jne L4                 ; 若cx≠0（A元素在B中存在），跳至L4（不存入my_C）
 002B  89 84 0064 R		    mov my_C[si], ax       ; 若cx=0（A元素在B中不存在），将该元素存入my_C[si]
 002F  83 C6 02			    add si, 2              ; si+2（移动到my_C的下一个预留位置，准备存下一个筛选结果）
 0032				L4:                        ; 外层循环后续：更新A数组索引，恢复外层计数器
 0032  83 C3 02			    add bx, 2              ; bx+2（移动到数组A的下一个元素，字型占2字节）
 0035  59			    pop cx                 ; 恢复外层循环计数器cx（之前push保存的值）
 0036  E2 D7			    loop L1                ; 外层循环：cx减1，若cx≠0则继续遍历A的下一个元素

				    ; 程序结束：退出并返回DOS系统
 0038  B4 4C			    MOV AH,4CH             ; 设置DOS功能调用号为4CH（程序正常退出，释放资源）
 003A  CD 21			    INT 21H                ; 执行DOS中断：返回DOS环境
 003C				CODES ENDS
				    END START              ; 汇编程序结束，指定程序入口为START标签（编译器从这里开始执行）
Microsoft (R) Macro Assembler Version 6.11		    11/02/25 17:09:14
tempfile.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

CODES  . . . . . . . . . . . . .	16 Bit	 003C	  Para	  Private 
DATAS  . . . . . . . . . . . . .	16 Bit	 0090	  Para	  Private 
STACKS . . . . . . . . . . . . .	16 Bit	 0000	  Para	  Private 


Symbols:

                N a m e                 Type     Value    Attr

A  . . . . . . . . . . . . . . .	Word	 0000	  DATAS	
B  . . . . . . . . . . . . . . .	Word	 0028	  DATAS	
L1 . . . . . . . . . . . . . . .	L Near	 000F	  CODES	
L2 . . . . . . . . . . . . . . .	L Near	 001B	  CODES	
L3 . . . . . . . . . . . . . . .	L Near	 0026	  CODES	
L4 . . . . . . . . . . . . . . .	L Near	 0032	  CODES	
START  . . . . . . . . . . . . .	L Near	 0000	  CODES	
my_C . . . . . . . . . . . . . .	Word	 0064	  DATAS	
num_A  . . . . . . . . . . . . .	Word	 008C	  DATAS	
num_B  . . . . . . . . . . . . .	Word	 008E	  DATAS	

	   0 Warnings
	   0 Errors
